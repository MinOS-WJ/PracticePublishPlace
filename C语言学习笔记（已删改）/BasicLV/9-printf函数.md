## printf函数

<img src="https://img-blog.csdnimg.cn/img_convert/1a1d70de9ee22c638b43de8009048570.png" title="" alt="" width="431">

- printf函数称之为格式输出函数,方法名称的最后一个字母f表示format。其功能是按照用户指定的格式,把指定的数据输出到屏幕上
- printf函数的调用格式为:
  + ```printf("格式控制字符串",输出项列表 );```
  + 例如:```printf("a = %d, b = %d",a, b);```
    <img src="https://img-blog.csdnimg.cn/img_convert/30dae0fb7fa2f93706031066d3cd99cf.png" title="" alt="" width="362">
  + 非格式字符串原样输出, 格式控制字符串会被输出项列表中的数据替换
  + 注意: 格式控制字符串和输出项在数量和类型上***必须一一对应***

---

- 格式控制字符串
  + 形式:  ```%[标志][输出宽度][.精度][长度]类型```

---

- 类型
  + 格式: ```printf("a = %类型", a);```
  + 类型字符串用以表示输出数据的类型, 其格式符和意义如下所示

| 类型    | 含义                 |
| ----- | ------------------ |
| d     | 有符号10进制整型          |
| i     | 有符号10进制整型          |
| u     | 无符号10进制整型          |
| o     | 无符号8进制整型           |
| x     | 无符号16进制整型          |
| X     | 无符号16进制整型          |
| f     | 单、双精度浮点数(默认保留6位小数) |
| e / E | 以指数形式输出单、双精度浮点数    |
| g / G | 以最短输出宽度,输出单、双精度浮点数 |
| c     | 字符                 |
| s     | 字符串                |
| p     | 地址                 |

```c
#include <stdio.h>
int main(){
    int a = 10;
    int b = -10;
    float c = 6.6f;
    double d = 3.1415926;
    double e = 10.10;
    char f = 'a';
    // 有符号整数(可以输出负数)
    printf("a = %d\n", a); // 10
    printf("a = %i\n", a); // 10

    // 无符号整数(不可以输出负数)
    printf("a = %u\n", a); // 10
    printf("b = %u\n", b); // 429496786

    // 无符号八进制整数(不可以输出负数)
    printf("a = %o\n", a); // 12
    printf("b = %o\n", b); // 37777777766

    // 无符号十六进制整数(不可以输出负数)
    printf("a = %x\n", a); // a
    printf("b = %x\n", b); // fffffff6

    // 无符号十六进制整数(不可以输出负数)
    printf("a = %X\n", a); // A
    printf("b = %X\n", b); // FFFFFFF6

    // 单、双精度浮点数(默认保留6位小数)
    printf("c = %f\n", c); // 6.600000
    printf("d = %lf\n", d); // 3.141593

    // 以指数形式输出单、双精度浮点数
    printf("e = %e\n", e); // 1.010000e+001
    printf("e = %E\n", e); // 1.010000E+001

    // 以最短输出宽度,输出单、双精度浮点数
    printf("e = %g\n", e); // 10.1
    printf("e = %G\n", e); // 10.1

    // 输出字符
    printf("f = %c\n", f); // a
}
```

---

- 宽度
  + 格式: ```printf("a = %[宽度]类型", a);```
  + 用十进制整数来指定输出的宽度, 如果实际位数多于指定宽度,则按照实际位数输出, 如果实际位数少于指定宽度则以空格补位

```c
#include <stdio.h>
int main(){
    // 实际位数小于指定宽度
    int a = 1;
    printf("a =|%d|\n", a); // |1|
    printf("a =|%5d|\n", a); // |    1|
    // 实际位数大于指定宽度
    int b = 1234567;
    printf("b =|%d|\n", b); // |1234567|
    printf("b =|%5d|\n", b); // |1234567|
}
```

---

- 标志
  + 格式: ```printf("a = %[标志][宽度]类型", a);```

| 标志  | 含义                           |
| --- | ---------------------------- |
| -   | 左对齐, 默认右对齐                   |
| +   | 当输出值为正数时,在输出值前面加上一个+号, 默认不显示 |
| 0   | 右对齐时, 用0填充宽度.(默认用空格填充)       |
| 空格  | 输出值为正数时,在输出值前面加上空格, 为负数时加上负号 |
| #   | 对c、s、d、u类型无影响                |
| #   | 对o类型, 在输出时加前缀o               |
| #   | 对x类型,在输出时加前缀0x               |

```c
#include <stdio.h>
int main(){
    int a = 1;
    int b = -1;
    // -号标志
    printf("a =|%d|\n", a); // |1|
    printf("a =|%5d|\n", a); // |    1|
    printf("a =|%-5d|\n", a);// |1    |
    // +号标志
    printf("a =|%d|\n", a); // |1|
    printf("a =|%+d|\n", a);// |+1|
    printf("b =|%d|\n", b); // |-1|
    printf("b =|%+d|\n", b);// |-1|
    // 0标志
    printf("a =|%5d|\n", a); // |    1|
    printf("a =|%05d|\n", a); // |00001|
    // 空格标志
    printf("a =|% d|\n", a); // | 1|
    printf("b =|% d|\n", b); // |-1|
    // #号
    int c = 10;
    printf("c = %o\n", c); // 12
    printf("c = %#o\n", c); // 012
    printf("c = %x\n", c); // a
    printf("c = %#x\n", c); // 0xa
}
```

---

- 精度
  + 格式: ```printf("a = %[精度]类型", a); ```
  + 精度格式符以"."开头, 后面跟上十进制整数, 用于指定需要输出多少位小数, 如果输出位数大于指定的精度, 则删除超出的部分

```c
#include <stdio.h>
int main(){
    double a = 3.1415926;
    printf("a = %.2f\n", a); // 3.14
}
```

- 动态指定保留小数位数
  + 格式: ```printf("a = %.*f", a);```

```c
#include <stdio.h>
int main(){
    double a = 3.1415926;
    printf("a = %.*f", 2, a); // 3.14
}
```

- 实型(浮点类型)有效位数问题
  + 对于单精度数,使用%f格式符输出时,仅前6~7位是有效数字
  + 对于双精度数,使用%lf格式符输出时,前15~16位是有效数字
  + 有效位数和精度(保留多少位)不同, 有效位数是指从第一个非零数字开始,误差不超过本数位半个单位的、精确可信的数位
  + 有效位数包含小数点前的非零数位

```c
#include <stdio.h>
int main(){
    //        1234.567871093750000
    float a = 1234.567890123456789;
    //         1234.567890123456900
    double b = 1234.567890123456789;
    printf("a = %.15f\n", a); // 前8位数字是准确的, 后面的都不准确
    printf("b = %.15f\n", b); // 前16位数字是准确的, 后面的都不准确
}
```

---

- 长度
  + 格式: ```printf("a = %[长度]类型", a);```

| 长度  | 修饰类型      | 含义               |
| --- | --------- | ---------------- |
| hh  | d、i、o、u、x | 输出char           |
| h   | d、i、o、u、x | 输出 short int     |
| l   | d、i、o、u、x | 输出 long int      |
| ll  | d、i、o、u、x | 输出 long long int |

```c
#include <stdio.h>
int main(){
    char a = 'a';
    short int b = 123;
    int  c = 123;
    long int d = 123;
    long long int e = 123;
    printf("a = %hhd\n", a); // 97
    printf("b = %hd\n", b); // 123
    printf("c = %d\n", c); // 123
    printf("d = %ld\n", d); // 123
    printf("e = %lld\n", e); // 123
}
```

- 转义字符
  + 格式: ```printf("%f%%", 3.1415);```
  + %号在格式控制字符串中有特殊含义, 所以想输出%必须添加一个转移字符

```c
#include <stdio.h>
int main(){
    printf("%f%%", 3.1415); // 输出结果3.1415%
}
```

---